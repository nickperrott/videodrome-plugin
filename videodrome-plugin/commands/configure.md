# /videodrome:configure

Configure Plex MCP server environment variables interactively.

## Usage

```
/videodrome:configure
```

## Description

This command launches an interactive configuration wizard that helps you set up all required environment variables for the Plex MCP server:

1. **Plex Server** - URL and authentication token
2. **TMDb API** - API key for metadata lookup
3. **Media Paths** - Root directory for your media library
4. **Optional Features** - Auto-ingest and file watching

The wizard will:
- Guide you through each setting with examples
- Validate your inputs
- Test connections to Plex and TMDb
- Save configuration to `.env` file
- Backup existing configuration if present

## What You Need

Before running this command, gather:

1. **Plex Server URL** - Usually `http://YOUR_IP:32400`
2. **Plex Token** - Get from [Plex support guide](https://support.plex.tv/articles/204059436/)
3. **TMDb API Key** - Get free key at [themoviedb.org/settings/api](https://www.themoviedb.org/settings/api)
4. **Media Root Path** - Absolute path to your media library

## Example Session

```
ðŸŽ¬ Plex MCP Server - Interactive Configuration

Ready to start? [Y/n]: y

----------------------------------------------------------------------
  1. Plex Server Configuration
----------------------------------------------------------------------

Your Plex server URL (typically http://YOUR_IP:32400)
Plex URL [http://localhost:32400]: http://192.168.1.100:32400

Your Plex authentication token
Plex Token: abc123def456...

ðŸ”„ Testing connection to Plex server...
âœ… Connected successfully to: My Plex Server

----------------------------------------------------------------------
  2. TMDb Configuration
----------------------------------------------------------------------

TMDb API Key: xyz789...

ðŸ”„ Testing TMDb API key...
âœ… TMDb API working!

[continues...]

âœ… Configuration Complete!

Next steps:
1. Test the server: uv run --env-file .env videodrome
2. Restart Claude Desktop to pick up new config
```

## Output

Creates or updates `.env` file in the project directory:

```bash
# Plex MCP Server Configuration
# Generated by configure.py

# Required Settings
PLEX_URL=http://192.168.1.100:32400
PLEX_TOKEN=abc123def456...
TMDB_API_KEY=xyz789uvw456...
PLEX_MEDIA_ROOT=/Volumes/Media

# Optional Settings
PLEX_INGEST_DIR=/Volumes/Media/Incoming
PLEX_AUTO_INGEST=false
PLEX_CONFIDENCE_THRESHOLD=0.85
PLEX_WATCHER_AUTO_START=false
```

## Safety

**Classification**: WRITE (requires confirmation)

**Reason**: Modifies .env file and tests network connections

**Confirmation Required**: Yes - "Configure Plex MCP server settings and save to .env file?"

## MCP Tools Used

This command runs the `configure.py` script directly via shell execution. It doesn't use MCP tools but instead provides an interactive terminal interface.

## Tips

- **Backup created**: Existing `.env` is backed up to `.env.backup`
- **Test connections**: Say "yes" when prompted to test Plex/TMDb
- **Local server**: Use `http://localhost:32400` if Plex runs on same machine
- **Network server**: Use your server's local IP (e.g., `192.168.1.100`)
- **Token security**: Keep your Plex token private - it's like a password!

## Troubleshooting

### Connection test fails

The wizard will still save your configuration even if connection tests fail. You can:
1. Fix the issue (check Plex is running, verify token)
2. Rerun `/videodrome:configure` to update
3. Or manually edit `.env` file

### Can't find Plex token

Follow the [official Plex guide](https://support.plex.tv/articles/204059436/):
1. Open Plex Web
2. Play any media
3. Click â‹¯ â†’ Get Info â†’ View XML
4. Look for `X-Plex-Token=` in the URL

### TMDb API key rejected

Make sure you're using:
- **API Key (v3 auth)** - NOT the API Read Access Token
- From https://www.themoviedb.org/settings/api
- "Developer" API type (free)

## Related Commands

- `/videodrome:status` - Check server status after configuration
- See `QUICKSTART.md` for manual configuration guide

## Notes

- Configuration is saved to `.env` in the project root
- Claude Desktop must be restarted to pick up new environment variables
- For security, tokens are masked in the summary display
- All paths must be absolute (no `~` or relative paths)
